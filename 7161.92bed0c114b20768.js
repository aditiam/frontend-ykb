"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7161],{7161:(H,h,o)=>{o.r(h),o.d(h,{AuthSignInModule:()=>X});var f=o(8498),u=o(8834),k=o(2765),m=o(2102),x=o(9213),v=o(9042),b=o(9183),I=o(3395),w=o(4299),F=o(7715),p=o(467),r=o(9969),l=o(9417),y=o(5312),t=o(3953),j=o(5524),S=o(3825),E=o(8776);let A=(()=>{class i{constructor(){this.STORAGE_KEY="user_data"}storeToken(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(n){throw console.error("Error storing JWT:",n),n}}getDecodedToken(){const e=localStorage.getItem(this.STORAGE_KEY);return e?JSON.parse(e):null}clearToken(){localStorage.removeItem(this.STORAGE_KEY)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var G=o(9923),T=o(5756),R=o(177),C=o(8974);const L=["splashVideo"],D=["signInNgForm"],Y=()=>["/dashboards/main"];function B(i,d){1&i&&(t.j41(0,"mat-error",31),t.EFF(1," Username diperlukan "),t.k0s())}function N(i,d){1&i&&t.nrm(0,"mat-icon",42),2&i&&t.Y8G("svgIcon","heroicons_solid:eye")}function V(i,d){1&i&&t.nrm(0,"mat-icon",42),2&i&&t.Y8G("svgIcon","heroicons_solid:eye-off")}function M(i,d){1&i&&(t.j41(0,"span",43),t.EFF(1," Login "),t.k0s())}function U(i,d){1&i&&t.nrm(0,"mat-progress-spinner",44),2&i&&t.Y8G("diameter",24)("mode","indeterminate")}function O(i,d){if(1&i){const e=t.RV6();t.j41(0,"div",45)(1,"h1",46),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.biologin())}),t.EFF(2," Login Sidik Jari "),t.j41(3,"p"),t.nrm(4,"mat-icon",47),t.k0s()()()}}function $(i,d){if(1&i){const e=t.RV6();t.j41(0,"div",48)(1,"div",49),t.nrm(2,"div",50),t.j41(3,"div",51)(4,"div",52),t.nrm(5,"div",53),t.k0s(),t.j41(6,"h3",54),t.EFF(7),t.k0s(),t.j41(8,"p",55),t.EFF(9),t.k0s(),t.j41(10,"p",56),t.EFF(11," terlalu lama? "),t.j41(12,"span",57),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.confirmReload())}),t.EFF(13," Reload Halaman "),t.k0s()()()()()}if(2&i){const e=t.XpG();t.R7$(7),t.SpI(" ",e.title||"Loading..."," "),t.R7$(2),t.SpI(" ",e.subTitle||"Mohon tunggu sebentar..."," ")}}const z=[{path:"",component:(()=>{class i{constructor(e,n,a,s,g,c,P,J,K){this._activatedRoute=e,this._authService=n,this._formBuilder=a,this._router=s,this._alert=g,this.bioauth=c,this._jwtService=P,this.sss=J,this.toast=K,this.isLoading=!0,this.animationState="visible",this.enVersion=y.c.appVersion,this.alert={type:"success",message:""},this.showAlert=!1,this.fingerauth=!1,this.checkUserAccess=[],this.isModalOpen=!1,this.signInTo=!1}ngOnInit(){var e=this;return(0,p.A)(function*(){e.signInForm=e._formBuilder.group({username:["",l.k0.required],password:["",l.k0.required],rememberMe:[""]}),(yield e.bioauth.performBiometricVerificatin())&&(e.fingerauth=yield e.bioauth.getauth()),e._authService.signOut();const s=(yield e.sss.getuser()).super_group_id;console.log("userLoginData",s)})()}biologin(){var e=this;return(0,p.A)(function*(){yield e.bioauth.authwith()})()}ngAfterViewInit(){this.splashVideo&&(this.splashVideo.nativeElement.currentTime=0,this.splashVideo.nativeElement.play())}onSplashEnd(){this.isLoading=!1}restartSplash(){this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},5e3)}confirmReload(){window.location.reload()}cekToken(){this.signIn(),this.signInTo&&this._router.navigate(["login-bridge"],{replaceUrl:!0}),console.log("1111111111111111",this.getCode)}signIn(){var e=this;return(0,p.A)(function*(){if(!e.signInForm.invalid){e.showAlert=!1,e.isModalOpen=!0;try{const n=yield e._authService.signIn(e.signInForm.value);if(console.log("sign 11111111111",n),n.token&&(e._router.navigate(["login-bridge"],{replaceUrl:!0}),e.isModalOpen=!1),console.log("11111111111111111111111111111111111",n.code),console.log("11111111111111111111111111111111111",n.message),console.log("11111111111111111111111111111111111",n),n&&n.code){if(403===n.code)return e._alert.error("Verifikasi Email Diperlukan","Akun perlu verifikasi OTP."),e._router.navigate(["/otp"],{queryParams:{email:e.signInForm.value.username||""}}),e.signInForm.enable(),void e.signInNgForm.resetForm();if(429===n.code)return e._alert.error("Akses Ditolak",n.message),e.signInForm.enable(),void(e.isLoading=!1);if(401===n.code)return e._alert.error("Akses Ditolak","Login gagal. Periksa kembali username dan password Anda."),e.signInForm.enable(),void e.signInNgForm.resetForm()}}catch(n){console.error("Error:",n)}finally{e.getCode=localStorage.getItem("code"),401==e.getCode&&(e.toast.error("Login Gagal!","Pastikan username dan password sudah benar.",7e3),e.isModalOpen=!1)}}})()}gotoMain(){this._router.navigate(["/dashboards/main"],{replaceUrl:!0})}navigateToRegister(){this._router.navigate(["/register"])}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(f.nX),t.rXU(j.u),t.rXU(l.ze),t.rXU(f.Ix),t.rXU(S.u),t.rXU(E.V),t.rXU(A),t.rXU(G.n),t.rXU(T.f))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["auth-sign-in"]],viewQuery:function(n,a){if(1&n&&(t.GBs(L,5),t.GBs(D,5)),2&n){let s;t.mGM(s=t.lsd())&&(a.splashVideo=s.first),t.mGM(s=t.lsd())&&(a.signInNgForm=s.first)}},decls:62,vars:14,consts:[["signInNgForm","ngForm"],["passwordField",""],[1,"bg-[white]","relative","flex","md:flex-row","flex-col","flex-auto","items-center","justify-start","h-[100vh]","overflow-hidden","w-full"],[1,"z-10","w-full","md:w-[60%]","md:flex","hidden","h-full","bg-white","relative","justify-center","items-center","flex-col"],["src","assets/aksenlogin.svg","alt","Logo image",1,"w-fit","md:h-[100vh]","z-20","absolute","top-0","right-[-1vw]"],["src","assets/aksenlogin3.svg","alt","Logo image",1,"w-fit","md:h-[50vh]","z-10","absolute","bottom-0","left-0"],[1,"h-fit","px-[4vw]","w-[90%]","flex","flex-col","gap-[1vw]"],[1,"text-[2.5vw]","font-bold","text-start","leading-normal"],[1,"w-[55%]","text-[0.8vw]"],[1,"animated-box","z-10","relative","max-md:gap-4","flex","flex-col","md:p-[2vw]","md:justify-center","justify-center","items-start","md:h-full","md:w-[40%]","w-full","md:rounded-[0px]","rounded-t-[30px]","shadow-xl","p-3","bg-white","h-[100%]"],["src","assets/aksenmobile.svg","alt","Logo image",1,"w-fit","h-[300px]","md:h-[1200px]","md:hidden","flex","z-20","absolute","right-0","top-0"],[1,"flex","max-md:gap-4","max-md:pt-[60px]","max-md:flex-col","items-start","text-black","w-full","p-[4vw]"],[1,"flex","gap-2","items-center","justify-center","pb-2"],["src","assets/jabar.png","alt","Logo image",1,"md:hidden","dark:hidden","w-[50px]","md:w-[140px]"],["src","assets/sdm_jabar.png","alt","Logo image",1,"md:hidden","dark:hidden","w-[50px]","md:w-[140px]"],[1,"w-full","h-full","flex","items-start","flex-col","gap-4","md:gap-[2vw]"],[1,"gap-2","hidden","md:flex","items-center","justify-center"],["src","assets/jabar.png","alt","Logo image",1,"hidden","md:flex","md:w-[55px]","lg:w-[60px]","xl:w-[65px]"],["src","assets/sdm_jabar.png","alt","Logo image",1,"hidden","md:flex","md:w-[55px]","lg:w-[60px]","xl:w-[65px]"],[1,"w-full","flex","justify-start"],[1,"md:flex","hidden","text-[20px]","md:text-[25px]","lg:text-[30px]","xl:text-[35px]","font-bold","text-center","md:text-start","leading-tight"],[1,"md:hidden","flex","text-[25px]","md:text-[25px]","lg:text-[30px]","xl:text-[35px]","font-bold","text-start","leading-tight"],[1,"bg-[#00ABEB]","self-start","rounded-full","w-[70px]","h-[4px]","md:w-[5vw]","md:h-[0.3vw]"],[1,"mt-5","text-black","flex","flex-col","gap-3","w-full",3,"formGroup"],[1,"w-full"],[1,"text-black"],["id","username","matInput","",3,"formControlName"],["class","",4,"ngIf"],["id","password","matInput","","type","password",3,"formControlName"],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,""],["mat-flat-button","",1,"fuse-mat-button-large","bg-[#00ABEB]","w-full","font-medium",3,"click","color","disabled"],["class","text-white",4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"text-center","w-full","mt-2"],["mat-flat-button","",1,"fuse-mat-button-large","bg-white","text-[#00ABEB]","w-full","rounded-md","font-medium",3,"click"],[1,"cursor-pointer","text-white","text-md","font-medium","hover:text-gray-200","underline",3,"routerLink"],["class","text-center cursor-pointer",4,"ngIf"],[1,"flex","md:mt-[2vw]","mt-[80px]","items-center","justify-center","w-full","h-[50px]","z-49","print:hidden"],[1,"flex","item-center","text-black","justify-center","text-[10px]","md:text-[8px]","lg:text-[10px]","xl:text-[12px]","text-center","font-medium"],["class","fixed inset-0 z-99999 overflow-y-auto","role","dialog","aria-modal","true",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],[1,"text-white"],[3,"diameter","mode"],[1,"text-center","cursor-pointer"],[1,"text-black","text-normal","mt-3",2,"font-family","'Montserrat' !important",3,"click"],["svgIcon","heroicons_outline:finger-print",1,"w-11","h-11","text-[200px]"],["role","dialog","aria-modal","true",1,"fixed","inset-0","z-99999","overflow-y-auto"],[1,"flex","items-center","justify-center","min-h-screen","px-4","text-center"],[1,"fixed","inset-0","bg-gray-900","bg-opacity-75","backdrop-blur-sm"],[1,"inline-block","align-middle","bg-white","rounded-2xl","text-center","overflow-hidden","shadow-xl","p-8","animate-fade-in"],[1,"relative","flex","justify-center","mb-6"],[1,"simple-spinner"],[1,"text-lg","font-bold","text-gray-800"],[1,"mt-2","text-sm","text-gray-500"],[1,"mt-4","text-xs"],[1,"poppins-semibold","text-red-500",3,"click"]],template:function(n,a){if(1&n){const s=t.RV6();t.j41(0,"div",2)(1,"div",3),t.nrm(2,"img",4)(3,"img",5),t.j41(4,"div",6)(5,"p",7),t.EFF(6," Selamat Datang di "),t.nrm(7,"br"),t.EFF(8," Aplikasi Satu SDM Jabar "),t.k0s(),t.j41(9,"p",8),t.EFF(10," Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiumdod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "),t.k0s()()(),t.j41(11,"div",9),t.nrm(12,"img",10),t.j41(13,"div",11)(14,"div",12),t.nrm(15,"img",13)(16,"img",14),t.k0s(),t.j41(17,"div",15)(18,"div",16),t.nrm(19,"img",17)(20,"img",18),t.k0s(),t.j41(21,"div",19)(22,"p",20),t.EFF(23," Silakan Masukkan "),t.nrm(24,"br"),t.EFF(25," Data Pengguna "),t.k0s(),t.j41(26,"p",21),t.EFF(27," Selamat Datang di "),t.nrm(28,"br"),t.EFF(29," Aplikasi Satu SDM Jabar "),t.k0s()(),t.nrm(30,"div",22),t.j41(31,"form",23,0)(33,"mat-form-field",24)(34,"mat-label",25),t.EFF(35,"Username"),t.k0s(),t.nrm(36,"input",26),t.DNE(37,B,2,0,"mat-error",27),t.k0s(),t.j41(38,"mat-form-field",24)(39,"mat-label",25),t.EFF(40,"Password"),t.k0s(),t.nrm(41,"input",28,1),t.j41(43,"button",29),t.bIt("click",function(){t.eBV(s);const c=t.sdS(42);return t.Njj(c.type="password"===c.type?"text":"password")}),t.DNE(44,N,1,1,"mat-icon",30)(45,V,1,1,"mat-icon",30),t.k0s(),t.j41(46,"mat-error",31),t.EFF(47," Password diperlukan "),t.k0s()(),t.j41(48,"button",32),t.bIt("click",function(){return t.eBV(s),t.Njj(a.signIn())}),t.DNE(49,M,2,0,"span",33)(50,U,1,2,"mat-progress-spinner",34),t.k0s(),t.j41(51,"div",35)(52,"button",36),t.bIt("click",function(){return t.eBV(s),t.Njj(a.navigateToRegister())}),t.EFF(53," Daftar Akun Baru "),t.k0s()(),t.j41(54,"div",35)(55,"a",37),t.EFF(56," Lewati Login "),t.k0s()(),t.DNE(57,O,5,0,"div",38),t.k0s(),t.j41(58,"div",39)(59,"span",40),t.EFF(60,"Copyright \xa9 2024 SSDM POLRI - Markas Besar Kepolisian Republik Indonesia. Powered by Bagdiapers Rodalpers SSDM Polri All rights reserved. "),t.k0s()()()()()(),t.DNE(61,$,14,2,"div",41)}if(2&n){const s=t.sdS(42);t.R7$(31),t.Y8G("formGroup",a.signInForm),t.R7$(5),t.Y8G("formControlName","username"),t.R7$(),t.Y8G("ngIf",a.signInForm.get("username").hasError("required")),t.R7$(4),t.Y8G("formControlName","password"),t.R7$(3),t.Y8G("ngIf","password"===s.type),t.R7$(),t.Y8G("ngIf","text"===s.type),t.R7$(3),t.Y8G("color","")("disabled",a.signInForm.disabled||a.signInForm.invalid),t.R7$(),t.Y8G("ngIf",!a.signInForm.disabled),t.R7$(),t.Y8G("ngIf",a.signInForm.disabled),t.R7$(5),t.Y8G("routerLink",t.lJ4(13,Y)),t.R7$(2),t.Y8G("ngIf",a.fingerauth),t.R7$(4),t.Y8G("ngIf",a.isModalOpen)}},dependencies:[f.Wk,u.$z,u.iY,m.rl,m.nJ,m.TL,m.yw,x.An,v.fg,b.LG,R.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,C.oY],styles:[".mat-mdc-form-field.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{background:transparent!important;border-radius:99px!important;color:#000!important}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:#000!important;caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mat-mdc-form-field.mat-form-field-appearance-fill.mat-focused:not(.mat-form-field-invalid) .mat-mdc-text-field-wrapper{--tw-border-opacity: 1 !important;border-color:#00abeb!important}layout router-outlet+*{display:block!important}.mat-mdc-form-field.mat-form-field-appearance-fill .mat-mdc-form-field-subscript-wrapper{display:none!important}.css-selector{background:linear-gradient(348deg,#3a0d2c,#21364f);background-size:200% 200%;animation:gradient 5s cubic-bezier(.4,0,1,1) infinite;height:100vh}@keyframes gradient{0%{background-position:0% 35%}50%{background-position:100% 50%}to{background-position:0% 35%}}@keyframes spin{to{transform:rotate(360deg)}}.simple-spinner{width:48px;height:48px;border:4px solid #e5e7eb;border-top-color:#3b82f6;border-radius:50%;animation:spin .8s linear infinite}@keyframes fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.animate-fade-in{animation:fadeIn .25s ease-out forwards}\n"],encapsulation:2,data:{animation:[(0,r.hZ)("fadeOut",[(0,r.wk)("visible",(0,r.iF)({opacity:1})),(0,r.wk)("hidden",(0,r.iF)({opacity:0,display:"none"})),(0,r.kY)("visible => hidden",[(0,r.i0)("1s ease-out")])]),(0,r.hZ)("fadeIn",[(0,r.wk)("hidden",(0,r.iF)({opacity:0})),(0,r.wk)("visible",(0,r.iF)({opacity:1})),(0,r.kY)("hidden => visible",[(0,r.i0)("1s 1s ease-in")])]),(0,r.hZ)("fadeOutMain",[(0,r.wk)("visible",(0,r.iF)({opacity:1})),(0,r.wk)("hidden",(0,r.iF)({opacity:0,display:"none"})),(0,r.kY)("visible => hidden",[(0,r.i0)("0.5s ease-out")])])]}})}}return i})()}];let X=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[f.iI.forChild(z),u.Hl,k.g7,m.RG,x.m_,v.fS,b.D6,I.S,w.Uq,F.G]})}}return i})()}}]);